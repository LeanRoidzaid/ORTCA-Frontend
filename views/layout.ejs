<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>ELAISS</title>
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/javascripts/jquery-validation/src/jquery-ui-1.12.1/jquery-ui.css">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/javascripts/jquery-validation/src/jquery-ui-1.12.1/jquery-ui.js" ></script>

</head>

<body>
  <header>
  <!--
    ITEMS NO IMPLEMENTADOS AUN
                        {NameItem: "Suspender Ordenes", url: "/",roles:"1"},
                    {NameItem: "Realizar Entrega", url: "/",roles:"2"},
                    {NameItem: "Suspender Ordenes", url: "/",roles:"3"},
                    {NameItem: "Productos", url: "/",roles:"1,2,3,4"}

  -->
  <%if (typeof token != 'undefined') {  %>
    <%if (token.length > 0) { 
      
      
    var DataMenu = [{NameItem: "Gestion de Usuarios", url: "/usuarios",roles:"4"},
                    {NameItem: "Gestion de Beneficiarios", url: "/beneficiarios/",roles:"1,2,3,4"},
                    
                    {NameItem: "Gestion de Ordenes", url: "/ordenes/",roles:"2"}
                    
                    ];  
    



    var DataMenuReports = [{NameItem: "Reporte de Retiros", url: "/index",roles:"1,2,3,4"},
                    {NameItem: "Reporte de Ordenes", url: "/index",roles:"1,2,3,4"},
                    {NameItem: "Reporte de Demanda", url: "/Reportes/demanda",roles:"1,2,3,4"}
                    ];                      
    %>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">ELAISS </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/">Inicio </a>
          </li>
          

            
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Gestionar
                    
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <% 
                    var muestraItem=false;
                    for(var j=0; j < DataMenu.length; j++) { 
                    
                      for (var k=0; k< DataMenu[j].roles.split(",").length; k++){
                        for(var i=0; i < Rol.length; i++) { 
                         if(DataMenu[j].roles.split(",")[k]==Rol[i].rol){
                            muestraItem=true; 
                          %>

                        <% } %>
                        <% } %>                        
                      <% } 
                      if(muestraItem==true){
                        %>
                        <a class="dropdown-item" href="<%= DataMenu[j].url %>" ><%=DataMenu[j].NameItem %></a>
                        <%
                        muestraItem=false;

                      }
                     } %>
  <!--                  <a class="dropdown-item" href="#">Another action</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Something else here</a>-->
                  </div>
                </li>
 
                










                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">
                      Reportes
                      
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <% 
                      var muestraItemReportes=false;
                      for(var j=0; j < DataMenuReports.length; j++) { 
                      
                        for (var k=0; k< DataMenuReports[j].roles.split(",").length; k++){
                          for(var i=0; i < Rol.length; i++) { 
                           if(DataMenuReports[j].roles.split(",")[k]==Rol[i].rol){
                            muestraItemReportes=true; 
                            %>
                        
                          <% } %>
                          <% } %>                        
                        <% } 
                        if(muestraItemReportes==true){
                          %>
                          
                          <a class="dropdown-item" href="<%= DataMenuReports[j].url %>" ><%=DataMenuReports[j].NameItem %></a>
                          <%
                          muestraItemReportes=false;
  
                        }
                       } %>

                    </div>
                  </li>

























              
            
        </ul>
        <!--
                  <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                  </form>-->
                  <%if (typeof token != 'undefined') {  %>
                    <%if (token.length > 0) {  %>       
                       <a class="nav-link" href="/">Bienvenido <%=usuario%>  </a>||<a class="nav-link" href="/usuarios/salir">Salir</a>
                    <% }else{ %>
                      <a class="nav-link" href="/login">Acceder </a>
                    <% } %>
                  <% } %>

      </div>
    </nav>
    <% } %>
  <% } %>
  </header>

  <main>
    <div class="container">
      <%- body %>
    </div>
  </main>




</body>

</html>